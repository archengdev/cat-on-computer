<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
<script>
/* global nn */

const GIF = 'IMG_0285.gif'
const COLOR = 'black'

async function setup() {
  nn.get('body').css({backgroundColor: COLOR})
  const landscape = nn.width > nn.height
  const size = (landscape ? nn.height : nn.width) / 2
  const gif = await nn.loadImage(GIF)
  // const x = (nn.width - size) / 2
  // const y = (nn.height - size) / 2
  const x = (nn.width - gif.width) / 2 + nn.randomInt(0, gif.width)
  const y = (nn.height - gif.height) / 2 + nn.randomInt(0, gif.height)
  
  const numCols = nn.width / (gif.width) / 2 + 2
  const numRows = nn.height / (gif.height) / 2 + 2
  for (let i = -numCols; i <= numCols; i++){
    for (let j = -numRows; j <= numRows; j++) {
      instantiate(x+i*gif.width,y+j*gif.height,size)
    }
  }
}

function instantiate(x,y,size) {  
  nn.create('img')
  .set({src: GIF})
  .css({
    position: 'absolute',
    left: x,
    top: y,
    // width: size,
    imageRendering: 'pixelated'
  })
  .addTo('body')
  
}
  
  
  
nn.on('load', setup)
  
</script>